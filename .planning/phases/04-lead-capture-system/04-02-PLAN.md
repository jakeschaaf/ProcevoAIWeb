---
phase: 04-lead-capture-system
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - components/contact-form.tsx
  - app/(marketing)/contact/page.tsx
autonomous: false

must_haves:
  truths:
    - "Contact form displays with email (required), name, company, message fields"
    - "Form shows validation errors on blur for invalid fields"
    - "Form submits to /api/contact and shows success/error feedback"
    - "Contact page includes alternative contact methods (email, LinkedIn)"
    - "Form can be completed in under 30 seconds"
  artifacts:
    - path: "components/contact-form.tsx"
      provides: "Client-side contact form with validation"
      min_lines: 80
    - path: "app/(marketing)/contact/page.tsx"
      provides: "Updated contact page with form and alternatives"
      min_lines: 60
  key_links:
    - from: "components/contact-form.tsx"
      to: "/api/contact"
      via: "fetch POST on form submit"
      pattern: "fetch.*api/contact"
    - from: "components/contact-form.tsx"
      to: "lib/contact-schema.ts"
      via: "import contactSchema for client validation"
      pattern: "contactSchema"
    - from: "app/(marketing)/contact/page.tsx"
      to: "components/contact-form.tsx"
      via: "import and render ContactForm"
      pattern: "ContactForm"
---

<objective>
Create the contact form UI and integrate it into the contact page with alternative contact methods.

Purpose: Complete the lead capture flow by connecting the frontend form to the backend API, giving visitors a frictionless way to reach out.

Output: Working contact page with validated form, submission feedback, and multiple contact options.
</objective>

<execution_context>
@/Users/jakeschaaf/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jakeschaaf/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-lead-capture-system/04-RESEARCH.md
@.planning/phases/04-lead-capture-system/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ContactForm client component</name>
  <files>components/contact-form.tsx</files>
  <action>
Create components/contact-form.tsx as a client component using react-hook-form + zod:

```typescript
'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { useState } from 'react';
import { contactSchema, type ContactFormData } from '@/lib/contact-schema';

type SubmitState = 'idle' | 'submitting' | 'success' | 'error';

export function ContactForm() {
  const [submitState, setSubmitState] = useState<SubmitState>('idle');
  const [errorMessage, setErrorMessage] = useState<string>('');

  const {
    register,
    handleSubmit,
    reset,
    formState: { errors },
  } = useForm<ContactFormData>({
    resolver: zodResolver(contactSchema),
    mode: 'onBlur', // Validate on blur for good UX
  });

  const onSubmit = async (data: ContactFormData) => {
    setSubmitState('submitting');
    setErrorMessage('');

    try {
      const response = await fetch('/api/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });

      if (!response.ok) {
        const result = await response.json();
        throw new Error(result.error || 'Something went wrong');
      }

      setSubmitState('success');
      reset();
    } catch (error) {
      setSubmitState('error');
      setErrorMessage(error instanceof Error ? error.message : 'Something went wrong');
    }
  };

  if (submitState === 'success') {
    return (
      <div className="text-center py-8">
        <div className="w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center">
          <svg className="w-8 h-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
          </svg>
        </div>
        <h3 className="text-xl font-semibold text-gray-900 mb-2">Message Sent!</h3>
        <p className="text-gray-600">Thanks for reaching out. I'll get back to you soon.</p>
        <button
          onClick={() => setSubmitState('idle')}
          className="mt-4 text-brand-600 hover:text-brand-700 font-medium"
        >
          Send another message
        </button>
      </div>
    );
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-5">
      {/* Honeypot - hidden from users, catches bots */}
      <input
        type="text"
        {...register('website')}
        className="absolute -left-[9999px]"
        tabIndex={-1}
        autoComplete="off"
        aria-hidden="true"
      />

      {/* Email - required */}
      <div>
        <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-1.5">
          Email <span className="text-red-500">*</span>
        </label>
        <input
          type="email"
          id="email"
          {...register('email')}
          className={`w-full px-4 py-3 rounded-lg border ${
            errors.email ? 'border-red-500' : 'border-gray-300'
          } focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-colors`}
          placeholder="you@company.com"
        />
        {errors.email && (
          <p className="mt-1 text-sm text-red-600">{errors.email.message}</p>
        )}
      </div>

      {/* Name - optional */}
      <div>
        <label htmlFor="name" className="block text-sm font-medium text-gray-700 mb-1.5">
          Name
        </label>
        <input
          type="text"
          id="name"
          {...register('name')}
          className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-colors"
          placeholder="Your name"
        />
      </div>

      {/* Company - optional */}
      <div>
        <label htmlFor="company" className="block text-sm font-medium text-gray-700 mb-1.5">
          Company
        </label>
        <input
          type="text"
          id="company"
          {...register('company')}
          className="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-colors"
          placeholder="Your company"
        />
      </div>

      {/* Message - required */}
      <div>
        <label htmlFor="message" className="block text-sm font-medium text-gray-700 mb-1.5">
          How can we help? <span className="text-red-500">*</span>
        </label>
        <textarea
          id="message"
          {...register('message')}
          rows={4}
          className={`w-full px-4 py-3 rounded-lg border ${
            errors.message ? 'border-red-500' : 'border-gray-300'
          } focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-colors resize-none`}
          placeholder="Tell us briefly about your situation..."
        />
        {errors.message && (
          <p className="mt-1 text-sm text-red-600">{errors.message.message}</p>
        )}
      </div>

      {/* Error message */}
      {submitState === 'error' && (
        <div className="p-4 rounded-lg bg-red-50 border border-red-200">
          <p className="text-sm text-red-700">{errorMessage}</p>
        </div>
      )}

      {/* Submit button */}
      <button
        type="submit"
        disabled={submitState === 'submitting'}
        className="w-full py-4 px-6 bg-gray-900 hover:bg-gray-800 disabled:bg-gray-400 text-white font-medium rounded-full transition-all duration-200 shadow-sm hover:shadow-md disabled:cursor-not-allowed"
      >
        {submitState === 'submitting' ? 'Sending...' : 'Send Message'}
      </button>
    </form>
  );
}
```

Key implementation details:
- `mode: 'onBlur'` validates when user leaves field (per research - good UX balance)
- Honeypot field is visually hidden but bots fill it
- Success state shows confirmation and option to send another
- Error state shows message from API
- Submit button shows loading state and is disabled during submission
- Uses existing Tailwind classes consistent with other components (rounded-lg, brand colors)
  </action>
  <verify>
- File exists: components/contact-form.tsx
- Exports ContactForm component
- Uses 'use client' directive
- Has honeypot field with aria-hidden
- Has validation error display for email and message
  </verify>
  <done>
- ContactForm component created with react-hook-form + zod validation
- Form has email (required), name, company, message fields plus honeypot
- Validates on blur with inline error messages
- Shows success/error states after submission
- Submit button shows loading state
  </done>
</task>

<task type="auto">
  <name>Task 2: Update contact page with form and alternative methods</name>
  <files>app/(marketing)/contact/page.tsx</files>
  <action>
Update app/(marketing)/contact/page.tsx to include the ContactForm and alternative contact methods:

```typescript
import type { Metadata } from 'next';
import { Container } from '@/components/ui/container';
import { ContactForm } from '@/components/contact-form';

export const metadata: Metadata = {
  title: 'Contact',
  description:
    'Get in touch with Procevo AI. Schedule a free consultation to discuss how we can help automate your processes.',
  openGraph: {
    title: 'Contact - Procevo AI',
    description:
      'Schedule a free consultation to discuss your automation needs.',
  },
};

export default function ContactPage() {
  return (
    <section className="py-20 md:py-28">
      <Container size="md">
        <div className="text-center mb-12">
          <p className="text-sm font-medium text-brand-500 tracking-widest uppercase mb-4">
            Get in Touch
          </p>
          <h1 className="font-display text-4xl md:text-5xl lg:text-6xl text-gray-900 tracking-tight mb-6">
            Let&apos;s Talk
          </h1>
          <p className="text-lg text-gray-600 max-w-xl mx-auto leading-relaxed">
            Ready to eliminate manual work and streamline your operations?
            Fill out the form below and I&apos;ll get back to you within 24 hours.
          </p>
        </div>

        <div className="grid md:grid-cols-5 gap-8 md:gap-12">
          {/* Contact Form - takes up 3 columns */}
          <div className="md:col-span-3">
            <div className="bg-white rounded-2xl border border-gray-200 p-6 md:p-8 shadow-sm">
              <ContactForm />
            </div>
          </div>

          {/* Alternative Contact Methods - takes up 2 columns */}
          <div className="md:col-span-2 space-y-6">
            {/* Email directly */}
            <div className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm">
              <div className="flex items-start gap-4">
                <div className="w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center flex-shrink-0">
                  <svg
                    className="w-5 h-5 text-brand-600"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    strokeWidth={1.5}
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"
                    />
                  </svg>
                </div>
                <div>
                  <h3 className="font-semibold text-gray-900 mb-1">Email</h3>
                  <a
                    href="mailto:jake@procevo.ai"
                    className="text-brand-600 hover:text-brand-700 transition-colors"
                  >
                    jake@procevo.ai
                  </a>
                </div>
              </div>
            </div>

            {/* LinkedIn */}
            <div className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm">
              <div className="flex items-start gap-4">
                <div className="w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center flex-shrink-0">
                  <svg
                    className="w-5 h-5 text-brand-600"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                  </svg>
                </div>
                <div>
                  <h3 className="font-semibold text-gray-900 mb-1">LinkedIn</h3>
                  <a
                    href="https://linkedin.com/in/jakeschaaf"
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-brand-600 hover:text-brand-700 transition-colors"
                  >
                    Connect with Jake
                  </a>
                </div>
              </div>
            </div>

            {/* Response time */}
            <div className="bg-gray-50 rounded-2xl border border-gray-200 p-6">
              <div className="flex items-start gap-4">
                <div className="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0">
                  <svg
                    className="w-5 h-5 text-gray-600"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    strokeWidth={1.5}
                  >
                    <path
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                </div>
                <div>
                  <h3 className="font-semibold text-gray-900 mb-1">Fast Response</h3>
                  <p className="text-sm text-gray-600">
                    I typically respond within 24 hours, often much sooner.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </Container>
    </section>
  );
}
```

Key changes from previous version:
- Replaced placeholder email link with actual ContactForm component
- Added grid layout: form (3 cols) + alternatives (2 cols)
- Added alternative contact methods: direct email, LinkedIn
- Added "Fast Response" section to set expectations
- Kept same header styling for consistency
- Removed the "Prefer to learn more first?" section (not needed with full form present)
  </action>
  <verify>
- File updated with ContactForm import
- Grid layout with form and alternatives
- Direct email link present
- LinkedIn link present (check actual URL - may need to update)
- `npm run dev` shows updated contact page
  </verify>
  <done>
- Contact page displays ContactForm component
- Alternative contact methods shown: email link, LinkedIn link
- Response time expectation set
- Layout is responsive (stacks on mobile, grid on desktop)
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete contact form flow: form with validation, API submission, email notification (if Resend configured), Telegram notification (if configured), success/error states</what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Visit http://localhost:3000/contact
3. Test validation:
   - Submit empty form - should show validation errors
   - Enter invalid email - should show error on blur
   - Fix email, leave message empty - should show error
4. Test successful submission (without env vars):
   - Enter valid email and message
   - Submit - should show error (expected: Resend not configured)
5. Visual check:
   - Form layout looks good on desktop
   - Form stacks properly on mobile (resize browser)
   - Alternative contact methods visible
   - Success state shows correctly (can test by mocking fetch response in browser)

If Resend/Telegram are configured with env vars:
6. Submit with valid data - should receive email AND Telegram notification
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
After completing all tasks:

1. **Form component exists:**
   ```bash
   ls -la components/contact-form.tsx
   ```

2. **Page renders without errors:**
   ```bash
   npm run dev
   # Visit http://localhost:3000/contact
   ```

3. **Build succeeds:**
   ```bash
   npm run build
   ```

4. **Full flow test (requires env vars):**
   - Configure .env.local with RESEND_API_KEY, TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID
   - Submit form
   - Verify email received
   - Verify Telegram message received
</verification>

<success_criteria>
- ContactForm component renders with all fields (email, name, company, message)
- Validation shows errors on blur for invalid input
- Form submits to /api/contact endpoint
- Success state displays after successful submission
- Error state displays with message on failure
- Contact page shows form AND alternative contact methods
- Page is responsive (form stacks on mobile)
- Form can realistically be completed in under 30 seconds (low friction)
</success_criteria>

<output>
After completion, create `.planning/phases/04-lead-capture-system/04-02-SUMMARY.md`
</output>
